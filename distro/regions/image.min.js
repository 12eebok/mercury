(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Mercury.ImageRegion=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.supported=!0,n.define("Mercury.ImageRegion","image",{undo:"undo",redo:"redo"}),n.prototype.tag="img",n.prototype.className="mercury-image-region",n.prototype.build=function(){return this.pushStack(this.attr("src")||null)},n.prototype.dropFile=function(e){var t,n=this;return t=new Mercury.Uploader([e[0]],{mimeTypes:this.config("regions:gallery:mimeTypes")}),t.on("uploaded",function(){return n.updateImage.apply(n,arguments)})},n.prototype.updateImage=function(e){return this.setSrc(e.get("url")),this.pushStack(this.attr("src"))},n.prototype.setSrc=function(e){if(e===null)return;return this.attr({src:e})},n.prototype.undo=function(){return this.setSrc(this.undoStack())},n.prototype.redo=function(){return this.setSrc(this.redoStack())},n.prototype.toJSON=function(){return{name:this.name,type:this.constructor.type,data:this.data(),src:this.attr("src")}},n}(Mercury.Region)}).call(this);